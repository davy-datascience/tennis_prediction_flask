{% extends 'tennis/base.html' %}

{% block title %}Tennis matches{% endblock %}

{% block content %}
    <h4>Tennis matches</h4>
    <br/>
    <input id="datepicker" data-provide="datepicker">

    <br/>

    <div class="row border border-secondary">
        <div class="col-1">
            Date
        </div>
        <div class="col-1">
            <div>Player 1</div>
            <div>Player 2</div>
        </div>
        <div class="col-1">
            score
        </div>
        <div class="col-1">
            Prediction
        </div>
    </div>

    <div class="row border border-secondary">
        <div class="col-1">
            Date
        </div>
        <div class="col-1">
            <div>Player 1</div>
            <div>Player 2</div>
        </div>
        <div class="col-1">
            score
        </div>
        <div class="col-1">
            Prediction
        </div>
    </div>

    <script>
        (function() {
            $('#datepicker').datepicker(
            {
                format: "dd/mm/yyyy",
                autoclose: true
            });


            $('#datepicker').datepicker('setDate', new Date(2021, 0, 15));

            $('#datepicker').datepicker().on('changeDate', function(e) {
                console.log("Date changed JS");
               //console.log($('#datepicker').datepicker('getDate'));

                date_picked = $('#datepicker').datepicker('getDate')
                year = date_picked.getFullYear()
                month = date_picked.getMonth() + 1
                day = date_picked.getDate()

                msg = year + " " + month + " " + day

                fetch('/change_date_of_matches', {
                    headers: {
                      'Content-Type': 'application/json'
                    },
                    method: 'POST',
                    body: msg
                }).then(function (response) {
                    return response.text();
                }).then(function (text) {
                    console.log(text);
                });

            });
        })();
    </script>
{% endblock %}